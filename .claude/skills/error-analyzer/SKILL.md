---
name: error-analyzer
description: エラー/スタックトレース/ログを解析し、原因の切り分けと最小修正案、確認手順を提示する。Use when debugging errors, analyzing stack traces, or troubleshooting issues.
---

# Error Analyzer - エラー解析スキル

ユーザーからエラー調査を依頼されたら、次の順で対応してください。

## When to Use This Skill

- エラーメッセージやスタックトレースの解析が必要な時
- 原因不明のバグを調査する時
- ビルドエラー、型エラー、実行時エラーの対応時
- デバッグ支援が必要な時

---

## 分析プロセス

### Step 1: 前提確認（不足があれば質問）

- 実行したコマンド、期待結果、実際の結果
- エラーメッセージ全文（スタックトレース/ログ）
- OS/Node/ブラウザ/ライブラリなどのバージョン
- 直近の変更（依存更新・設定変更・環境変数変更）

### Step 2: 切り分け

- 再現条件（毎回/特定条件のみ）
- 失敗箇所（最初に意味のあるスタックフレーム、依存ライブラリではない自コード）
- 種別（ビルド、型、実行時、ネットワーク、認証、DB、権限、CORS など）

### Step 3: 原因仮説 → 検証

- 可能性の高い順に 2〜3 個に絞り、最小の確認手順（コマンド/ログ追加/設定確認）を提案する

### Step 4: 修正案

- **最小修正**: まず動かす
- **恒久対応**: 設計/設定/バリデーション/型/テスト追加
- **影響範囲**: 副作用、互換性、ロールバック案

### Step 5: 確認手順

- 修正後に通すべきコマンド（例: `npm test`, `npm run build`）と確認観点を提示する

---

## Output Format（推奨）

```markdown
## 症状（要約）
[エラーの概要]

## 直接原因（最有力）
[最も可能性の高い原因]

## 根本原因（背景）
[なぜこの問題が発生したか]

## 修正案
### 最小修正
[すぐ動かすための修正]

### 恒久対応
[将来的な対策]

## 確認手順
[修正後の検証方法]

## 追加で必要な情報（あれば）
[足りない情報]
```

---

## AI Assistant Instructions

このスキルが起動されたら:

1. **まず情報を収集**
   - エラーメッセージの全文を確認
   - 関連するコードを読む
   - 環境情報を把握

2. **体系的に分析**
   - エラーの種類を特定
   - 原因仮説を立てる
   - 検証手順を提案

3. **具体的な解決策を提示**
   - コード修正例を含める
   - 確認手順を明示

Always:
- 具体的なファイルパスと行番号を示す
- 修正コードは実行可能な形で提供
- 複数の仮説がある場合は優先度順に提示

Never:
- 不完全な情報で断定的な結論を出さない
- ユーザーのコードを見ずに推測だけで回答しない
