---
name: "error-analyzer"
description: "エラー/スタックトレース/ログを解析し、原因の切り分けと最小修正案、確認手順を提示する。"
---

# Instruction（指示書）

ユーザーからエラー調査を依頼されたら、次の順で対応してください。

1. **前提確認（不足があれば質問）**
   - 実行したコマンド、期待結果、実際の結果
   - エラーメッセージ全文（スタックトレース/ログ）
   - OS/Node/ブラウザ/ライブラリなどのバージョン
   - 直近の変更（依存更新・設定変更・環境変数変更）
2. **切り分け**
   - 再現条件（毎回/特定条件のみ）
   - 失敗箇所（最初に意味のあるスタックフレーム、依存ライブラリではない自コード）
   - 種別（ビルド、型、実行時、ネットワーク、認証、DB、権限、CORS など）
3. **原因仮説 → 検証**
   - 可能性の高い順に 2〜3 個に絞り、最小の確認手順（コマンド/ログ追加/設定確認）を提案する
4. **修正案**
   - 最小修正（まず動かす）
   - 恒久対応（設計/設定/バリデーション/型/テスト追加）
   - 影響範囲（副作用、互換性、ロールバック案）
5. **確認手順**
   - 修正後に通すべきコマンド（例: `npm test`, `npm run build`）と確認観点を提示する

# Output format（推奨）

- 症状（要約）
- 直接原因（最有力）
- 根本原因（背景）
- 修正案（最小/恒久）
- 確認手順
- 追加で必要な情報（あれば）

